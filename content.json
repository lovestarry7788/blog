{"posts":[{"title":"MIT 6.824 Lab 2 —— 实现 Raft","text":"2A2B","link":"/2022/11/17/MIT%206.824%20Lab%202%20-%20%E5%AE%9E%E7%8E%B0%20Raft/"},{"title":"MIT 6.824 Lab1 - 实现 MapReduce","text":"0. 写在前面MIT 6.824 Spring 2022：课程安排：https://pdos.csail.mit.edu/6.824/schedule.htmlLab1 任务：https://pdos.csail.mit.edu/6.824/labs/lab-mr.htmlMapReduce 论文：https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf 1. 论文摘要12345map(String key, String value): // key: document name // value: document contents for each word w in value: EmitIntermediate(w, &quot;1&quot;); Map 部分输入是 （文件名，文件内容），输出 list(每个单词，出现次数）。在这个 Lab 中，我们将每一个需要统计单词的文本都分成一个 splits，然后每个 splits 1234567reduce(String key, Iterator values): // key: a word // values: a list of counts int result = 0; for each v in values: result += ParseInt(v); Emit(AsString(result)); Reduce 部分输入是 (一个单词，list(这个单词的数量) )，输出这个单词的总数量。 Map操作，讲输入的数据分成 M splits，每个 splits 在不同的机器中并行处理，通过把 intermediate key 分成 R 个分区（hash(key) mod R)。 2.1 任务背景在 src/main目录下，有很多段 pg*.txt 的文本，任务需要实现一个 单机多进程并行 的 MapReduce 的方法来所有文本中每个单词出现的数量。 2.2 任务要求 map 阶段需要将中间文件的key分成nReduce份，最后通过reducer 输出结果 mr-out-X mr-out-X里面的格式需要遵循%v %v 修改 mr/worker.go，mr/coordinate.go，mr/rpc.go 文件来完成任务。 在 main/mrcoordinator.go 这个文件中，需要实现Done()这个函数来返回 MapReduce 已经完成。 2.3 任务提示 一种实现mr/worker.go的方法是，每次向 3.1 任务开始实现的 Map 和 Reduce 模块，是以插件 plugin 的形式，通过链接 .so 文件的方式来运行的。 123456$ cd ~/6.824$ cd src/main$ go build -race -buildmode=plugin ../mrapps/wc.go$ rm mr-out*$ go run -race mrsequential.go wc.so pg*.txt$ more mr-out-0 补偿机制当实现了大部分代码之后，尝试运行测试脚本test-mr.sh，发现有一个crash test 一直跑不过，或者出现卡住的情况。 打开 mrapps/crash.go，发现卡住的原因是在mapf 里，要么会出现进程直接退出的情况，要么会出现有延迟的情况。 测试写好代码后，运行测试脚本 test-mr.sh，应该可以通过所有的测试用例。 123456789101112131415161718192021222324252627*** Cannot find timeout command; proceeding without timeouts.*** Starting wc test.2022/11/21 01:24:30 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- wc test: PASS2022/11/21 01:24:37 dialing:dial unix /var/tmp/824-mr-501: connect: connection refused2022/11/21 01:24:37 dialing:dial unix /var/tmp/824-mr-501: connect: connection refused*** Starting indexer test.2022/11/21 01:24:38 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- indexer test: PASS2022/11/21 01:24:44 dialing:dial unix /var/tmp/824-mr-501: connect: connection refused*** Starting map parallelism test.2022/11/21 01:24:44 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- map parallelism test: PASS*** Starting reduce parallelism test.2022/11/21 01:24:51 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- reduce parallelism test: PASS*** Starting job count test.2022/11/21 01:24:59 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- job count test: PASS*** Starting early exit test.2022/11/21 01:25:16 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three2022/11/21 01:25:23 dialing:dial unix /var/tmp/824-mr-501: connect: connection refused--- early exit test: PASS*** Starting crash test.2022/11/21 01:25:23 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three--- crash test: PASS*** PASSED ALL TESTS","link":"/2022/11/16/MIT%206.824%20Lab1%20-%20%E5%AE%9E%E7%8E%B0%20MapReduce/"},{"title":"MIT 6.824 Lab2 —— 实现 Raft","text":"2A2B","link":"/2022/11/17/MIT%206.824%20Lab2%20-%20%E5%AE%9E%E7%8E%B0%20Raft/"},{"title":"心法思维","text":"思维技能 系统思维 &lt;-&gt; 线性思维（一一对应的）","link":"/2022/11/29/%E5%BF%83%E6%B3%95%E6%80%9D%E7%BB%B4/"},{"title":"分布式学习","text":"基础概念MIT 6.824 MIT 6.824 Lab1. MapReduce MIT 6.824 Lab2. Raft","link":"/2022/11/29/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"go","slug":"go","link":"/tags/go/"},{"name":"职场","slug":"职场","link":"/tags/%E8%81%8C%E5%9C%BA/"},{"name":"MIT 6.824","slug":"MIT-6-824","link":"/tags/MIT-6-824/"},{"name":"Lab","slug":"Lab","link":"/tags/Lab/"},{"name":"分布式","slug":"分布式","link":"/tags/%E5%88%86%E5%B8%83%E5%BC%8F/"}],"categories":[{"name":"Labs","slug":"Labs","link":"/categories/Labs/"}],"pages":[]}